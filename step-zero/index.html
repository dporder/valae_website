<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SS9FY3PEJM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-SS9FY3PEJM');
</script>
<title>Step Zero — Knowledge Engine | Valae</title>
<meta name="description" content="Step Zero reads your enterprise files and systems, maps the people, processes, and facts inside them, and builds an interconnected knowledge graph that powers any AI tool.">
<link rel="canonical" href="https://valae.ai/step-zero">
<meta property="og:type" content="website">
<meta property="og:url" content="https://valae.ai/step-zero">
<meta property="og:title" content="Step Zero — The Knowledge Engine Behind Every AI Tool">
<meta property="og:description" content="Step Zero reads your enterprise files, discovers the entities and relationships inside them, and builds a knowledge graph that powers assistants, automations, and chatbots.">
<meta property="og:image" content="https://valae.ai/assets/logos/valae_social_image.jpg">
<meta property="og:site_name" content="Valae">
<meta property="og:locale" content="en_GB">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://valae.ai/step-zero">
<meta name="twitter:title" content="Step Zero — The Knowledge Engine Behind Every AI Tool">
<meta name="twitter:description" content="Step Zero reads your enterprise files, discovers the entities and relationships inside them, and builds a knowledge graph that powers assistants, automations, and chatbots.">
<meta name="twitter:image" content="https://valae.ai/assets/logos/valae_social_image.jpg">
<link rel="icon" type="image/png" href="../assets/logos/valaestar_logo.png">
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
@font-face { font-family: 'Brother 1816'; font-weight: 300; font-style: normal; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Light.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 300; font-style: italic; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Light-Italic.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 400; font-style: normal; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Regular.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 400; font-style: italic; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Regular-Italic.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 500; font-style: normal; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Medium.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 500; font-style: italic; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Medium-Italic.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 600; font-style: normal; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Bold.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 600; font-style: italic; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Bold-Italic.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 700; font-style: normal; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Extra-Bold.woff2') format('woff2'); }
@font-face { font-family: 'Brother 1816'; font-weight: 700; font-style: italic; font-display: swap; src: url('../fonts/Brother 1816/Brother-1816-Font/Brother-1816-Extra-Bold-Italic.woff2') format('woff2'); }

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --forest: #003017;
  --forest-deep: #001a0d;
  --forest-mid: #002a14;
  --pistachio: #BAD9A8;
  --pistachio-light: #d4eac6;
  --pistachio-dim: rgba(186,217,168,0.15);
  --offwhite: #DFDCD7;
  --charcoal: #1A1D1B;
  --bg: #FAFAF7;
  --bg-warm: #F5F2ED;
  --white: #ffffff;
  --max-w: 1100px;
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
  --font-display: 'Unbounded', sans-serif;
  --font-body: 'Brother 1816', -apple-system, BlinkMacSystemFont, sans-serif;
}

html { scroll-behavior: smooth; }
body {
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--charcoal);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  overflow-x: hidden;
}
.container { max-width: var(--max-w); margin: 0 auto; padding: 0 40px; }
a { text-decoration: none; color: inherit; }

/* ================================================================
   ANIMATIONS
   ================================================================ */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes pulse {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.3); }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes energyFlow {
  0% { background-position: 0 0; }
  100% { background-position: 0 200%; }
}
@keyframes drawIn {
  from { stroke-dashoffset: 1; }
  to { stroke-dashoffset: 0; }
}

.fade-up { opacity: 0; animation: fadeUp 0.8s var(--ease) forwards; }
.fade-up-d1 { animation-delay: 0.15s; }
.fade-up-d2 { animation-delay: 0.3s; }
.fade-up-d3 { animation-delay: 0.45s; }
.fade-up-d4 { animation-delay: 0.6s; }

/* ================================================================
   SCROLL REVEAL
   ================================================================ */
.reveal {
  opacity: 0;
  transform: translateY(40px);
  transition: opacity 0.8s var(--ease), transform 0.8s var(--ease);
}
.reveal.is-visible {
  opacity: 1;
  transform: translateY(0);
}
.reveal-d1 { transition-delay: 0.1s; }
.reveal-d2 { transition-delay: 0.2s; }
.reveal-d3 { transition-delay: 0.3s; }
.reveal-d4 { transition-delay: 0.4s; }
.reveal-d5 { transition-delay: 0.5s; }
.reveal-d6 { transition-delay: 0.6s; }
.reveal-d7 { transition-delay: 0.7s; }
.reveal-d8 { transition-delay: 0.8s; }

/* ================================================================
   NAV
   ================================================================ */
.nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  padding: 0 40px; transition: all 0.4s ease;
}
.nav.at-top { background: transparent; }
.nav.scrolled {
  background: rgba(0,48,23,0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(186,217,168,0.15);
}
.nav-inner {
  max-width: var(--max-w); margin: 0 auto;
  display: flex; align-items: center; justify-content: space-between; height: 64px;
}
.nav-brand { display: flex; align-items: center; gap: 12px; color: var(--pistachio); }
.nav-links { display: flex; align-items: center; gap: 32px; }
.nav-link {
  font-size: 14px; font-weight: 500;
  color: rgba(186,217,168,0.55);
  transition: color 0.2s ease; letter-spacing: -0.1px;
}
.nav-link:hover { color: var(--pistachio); }
.nav-link.active { color: var(--pistachio); font-weight: 600; }
.nav-cta {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 10px 22px; border-radius: 8px;
  background: var(--pistachio); color: var(--forest);
  font-weight: 600; font-size: 14px; letter-spacing: -0.2px;
  transition: all 0.3s ease; cursor: pointer; border: none;
}
.nav-cta:hover { background: var(--pistachio-light); transform: translateY(-1px); }

/* ================================================================
   SECTION UTILITIES
   ================================================================ */
.section-label {
  display: inline-flex; align-items: center; gap: 8px;
  font-size: 12px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase;
  color: var(--forest); opacity: 0.5;
  margin-bottom: 20px;
}
.section-label--light { color: var(--pistachio); opacity: 0.5; }
.section-title {
  font-family: var(--font-display);
  font-size: clamp(28px, 3.5vw, 42px);
  font-weight: 600; line-height: 1.15;
  color: var(--charcoal);
  letter-spacing: -1.5px;
  margin-bottom: 20px;
}
.section-title em { font-style: italic; color: var(--forest); }
.section-title--light { color: var(--offwhite); }
.section-title--light em { color: var(--pistachio); }
.section-sub {
  font-size: 17px; line-height: 1.7; color: rgba(26,29,27,0.6);
  max-width: 620px; margin-bottom: 48px;
}
.section-sub--light { color: rgba(223,220,215,0.6); }
.btn-primary {
  display: inline-flex; align-items: center; gap: 10px;
  padding: 16px 32px;
  background: var(--pistachio); color: var(--forest);
  font-weight: 600; font-size: 16px;
  border-radius: 12px; border: none; cursor: pointer;
  transition: all 0.3s var(--ease); letter-spacing: -0.3px;
  font-family: var(--font-body);
}
.btn-primary:hover { background: var(--pistachio-light); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(186,217,168,0.25); }
.btn-primary svg { transition: transform 0.3s ease; }
.btn-primary:hover svg { transform: translateX(3px); }
.btn-ghost {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 16px 28px;
  background: transparent;
  border: 1.5px solid rgba(186,217,168,0.25);
  color: var(--pistachio);
  font-weight: 500; font-size: 15px;
  border-radius: 12px; cursor: pointer;
  transition: all 0.3s ease; font-family: var(--font-body);
}
.btn-ghost:hover { border-color: rgba(186,217,168,0.5); background: rgba(186,217,168,0.05); }

.grain {
  position: relative;
}
.grain::after {
  content: ''; position: absolute; inset: 0; opacity: 0.03; pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ================================================================
   HERO
   ================================================================ */
.sz-hero {
  position: relative; overflow: hidden;
  min-height: 100vh; display: flex; align-items: center;
  background: var(--forest);
  padding: 120px 0 100px;
}
.sz-hero-canvas {
  position: absolute; inset: 0; z-index: 1;
  width: 100%; height: 100%;
  pointer-events: none;
  opacity: 0.9;
}
.sz-hero-overlay {
  position: absolute; inset: 0; z-index: 2;
  background:
    radial-gradient(ellipse at 50% 40%, rgba(0,48,23,0) 0%, rgba(0,26,13,0.55) 75%),
    radial-gradient(circle at 30% 30%, rgba(186,217,168,0.03) 0%, transparent 40%),
    radial-gradient(circle at 70% 65%, rgba(186,217,168,0.02) 0%, transparent 35%);
}
.sz-hero-content {
  position: relative; z-index: 3;
  max-width: var(--max-w); margin: 0 auto; padding: 0 40px;
  text-align: center;
}
.sz-hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 18px 8px 14px;
  background: rgba(186,217,168,0.08);
  border: 1px solid rgba(186,217,168,0.15);
  border-radius: 100px;
  font-size: 14px; font-weight: 500; color: var(--pistachio);
  margin-bottom: 36px; letter-spacing: 0.3px;
}
.sz-hero-badge-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--pistachio);
  animation: pulse 2s ease infinite;
}
.sz-hero h1 {
  font-family: var(--font-display);
  font-size: clamp(36px, 5vw, 58px);
  font-weight: 600; line-height: 1.08;
  color: var(--offwhite);
  letter-spacing: -2.5px;
  margin-bottom: 28px;
  max-width: 820px; margin-left: auto; margin-right: auto;
}
.sz-hero h1 em { font-style: italic; color: var(--pistachio); }
.sz-hero-sub {
  font-size: 18px; line-height: 1.65; color: rgba(223,220,215,0.65);
  max-width: 600px; margin: 0 auto 44px;
  font-weight: 400;
}
.sz-hero-cta {
  display: flex; align-items: center; justify-content: center; gap: 16px;
  flex-wrap: wrap;
}

/* ================================================================
   PROBLEM
   ================================================================ */
.sz-problem {
  padding: 100px 0;
  background: var(--bg);
}
.sz-problem-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}
.sz-problem-card {
  background: var(--white);
  border: 1.5px solid rgba(0,48,23,0.06);
  border-radius: 20px;
  padding: 36px 32px;
  transition: all 0.4s ease;
}
.sz-problem-card:hover {
  border-color: rgba(0,48,23,0.15);
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(0,48,23,0.06);
}
.sz-problem-icon {
  width: 52px; height: 52px;
  border-radius: 14px;
  background: rgba(186,217,168,0.12);
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 24px;
}
.sz-problem-card h3 {
  font-family: var(--font-display);
  font-size: 18px; font-weight: 600;
  color: var(--charcoal); letter-spacing: -0.5px;
  margin-bottom: 12px;
}
.sz-problem-card p {
  font-size: 16px; line-height: 1.65;
  color: rgba(26,29,27,0.55);
}
.sz-problem-quote {
  margin-top: 48px;
  text-align: center;
  font-size: 19px; font-style: italic; line-height: 1.6;
  color: rgba(26,29,27,0.45);
  max-width: 640px; margin-left: auto; margin-right: auto;
}

/* ================================================================
   SOLUTION
   ================================================================ */
.sz-solution {
  padding: 100px 0;
  background: var(--bg-warm);
  overflow: hidden;
}
.sz-solution-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 64px; align-items: center;
}
.sz-solution-text h3 {
  font-family: var(--font-display);
  font-size: 15px; font-weight: 600;
  color: var(--forest); letter-spacing: -0.3px;
  margin-bottom: 16px; line-height: 1.5;
}
.sz-solution-text p {
  font-size: 16px; line-height: 1.7;
  color: rgba(26,29,27,0.6);
  margin-bottom: 16px;
}
.sz-solution-text blockquote {
  font-size: 17px; font-style: italic; line-height: 1.6;
  color: var(--forest);
  padding-left: 20px;
  border-left: 3px solid var(--pistachio);
  margin-top: 24px;
}
.sz-transform {
  position: relative;
  height: 420px;
  border-radius: 20px;
  background: var(--white);
  border: 1.5px solid rgba(0,48,23,0.06);
  overflow: hidden;
}
.sz-transform-canvas {
  width: 100%; height: 100%;
  display: block;
}

/* ================================================================
   PIPELINE
   ================================================================ */
.sz-pipeline {
  padding: 100px 0 80px;
  background: var(--white);
  position: relative;
}
.sz-pipeline-header {
  text-align: center;
  max-width: 640px;
  margin: 0 auto 72px;
}
.sz-pipeline-header .section-title { margin-left: auto; margin-right: auto; }
.sz-pipeline-header .section-sub { margin-left: auto; margin-right: auto; }
.sz-timeline {
  position: relative;
  max-width: 720px;
  margin: 0 auto;
  padding-left: 72px;
}
.sz-timeline::before {
  content: '';
  position: absolute;
  left: 27px; top: 0; bottom: 0;
  width: 2px;
  background: linear-gradient(to bottom,
    rgba(186,217,168,0.05),
    rgba(186,217,168,0.25) 15%,
    rgba(186,217,168,0.25) 85%,
    rgba(186,217,168,0.05)
  );
}
.sz-timeline-energy {
  position: absolute;
  left: 24px; top: 0; bottom: 0;
  width: 8px;
  pointer-events: none;
  overflow: hidden;
}
.sz-timeline-energy::before {
  content: '';
  position: absolute;
  left: 0; top: -100%; width: 100%; height: 200%;
  background: linear-gradient(to bottom,
    transparent 0%,
    rgba(186,217,168,0.4) 45%,
    rgba(186,217,168,0.6) 50%,
    rgba(186,217,168,0.4) 55%,
    transparent 100%
  );
  animation: energyFlow 3s linear infinite;
}
.sz-step {
  position: relative;
  margin-bottom: 56px;
  padding-bottom: 8px;
}
.sz-step:last-child { margin-bottom: 0; }
.sz-step-dot {
  position: absolute;
  left: -72px; top: 4px;
  width: 56px; height: 56px;
  border-radius: 48% 52% 50% 50% / 52% 48% 52% 48%;
  background: var(--forest);
  border: 2px solid rgba(186,217,168,0.3);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-display);
  font-size: 16px; font-weight: 600;
  color: var(--pistachio);
  z-index: 2;
  transition: all 0.4s ease;
}
.sz-step:nth-child(even) .sz-step-dot { border-radius: 52% 48% 48% 52% / 48% 52% 48% 52%; }
.sz-step:nth-child(3n) .sz-step-dot { border-radius: 50% 48% 52% 50% / 50% 52% 48% 50%; }
.sz-step.is-visible .sz-step-dot {
  border-color: var(--pistachio);
  box-shadow: 0 0 20px rgba(186,217,168,0.2);
}
.sz-step-content {
  background: var(--bg);
  border: 1.5px solid rgba(0,48,23,0.06);
  border-radius: 16px;
  padding: 32px 32px 28px;
  transition: all 0.4s ease;
}
.sz-step:hover .sz-step-content {
  border-color: rgba(186,217,168,0.3);
  box-shadow: 0 8px 32px rgba(0,48,23,0.04);
}
.sz-step-title {
  font-family: var(--font-display);
  font-size: 20px; font-weight: 600;
  color: var(--charcoal);
  letter-spacing: -0.8px;
  margin-bottom: 10px;
}
.sz-step-desc {
  font-size: 16px; line-height: 1.7;
  color: rgba(26,29,27,0.55);
}
.sz-step-tags {
  display: flex; flex-wrap: wrap; gap: 6px;
  margin-top: 16px;
}
.sz-step-tag {
  padding: 4px 12px;
  border-radius: 6px;
  background: rgba(186,217,168,0.1);
  font-size: 12px; font-weight: 500;
  color: var(--forest); opacity: 0.7;
}

/* Resolution visual in pipeline */
.sz-step-resolution {
  display: flex; align-items: center; gap: 0;
  margin-top: 20px; padding: 14px 18px;
  background: rgba(186,217,168,0.04);
  border: 1px dashed rgba(186,217,168,0.15);
  border-radius: 12px;
  overflow: hidden;
}
.sz-res-mentions {
  display: flex; flex-direction: column; gap: 4px;
  flex-shrink: 0;
}
.sz-res-mention {
  padding: 3px 10px;
  background: rgba(0,48,23,0.05);
  border-radius: 5px;
  font-size: 12px; font-weight: 500;
  font-style: italic;
  color: rgba(26,29,27,0.4);
  white-space: nowrap;
}
.sz-res-arrow-wrap {
  flex-shrink: 0;
  padding: 0 6px;
  display: flex; align-items: center;
}
.sz-res-entity {
  display: flex; flex-direction: column; gap: 2px;
  padding: 8px 14px;
  background: var(--forest);
  border-radius: 9px;
  border: 1.5px solid rgba(186,217,168,0.25);
  flex-shrink: 0;
}
.sz-res-entity strong { font-size: 13px; color: var(--pistachio); font-weight: 600; }
.sz-res-entity span { font-size: 10px; color: rgba(186,217,168,0.45); }

/* Organic background accents */
.sz-organic-accent {
  position: absolute; pointer-events: none; z-index: 0;
  opacity: 0.04;
}

/* ================================================================
   KNOWLEDGE GRAPH
   ================================================================ */
.sz-kg {
  padding: 100px 0;
  background: var(--forest);
  position: relative; overflow: hidden;
}
.sz-kg::before {
  content: ''; position: absolute; inset: 0;
  background:
    radial-gradient(ellipse at 15% 25%, rgba(186,217,168,0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 85% 75%, rgba(186,217,168,0.04) 0%, transparent 45%),
    radial-gradient(ellipse at 50% 50%, rgba(186,217,168,0.02) 0%, transparent 60%);
  pointer-events: none;
}
.sz-kg-header {
  text-align: center;
  margin-bottom: 48px;
  position: relative; z-index: 2;
}
.sz-kg-tabs {
  display: flex; align-items: center; justify-content: center;
  gap: 8px;
  margin-top: 32px;
}
.sz-kg-tab {
  padding: 8px 20px;
  border-radius: 8px;
  border: 1px solid rgba(186,217,168,0.15);
  background: transparent;
  color: rgba(186,217,168,0.5);
  font-family: var(--font-body);
  font-size: 13px; font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
}
.sz-kg-tab:hover { border-color: rgba(186,217,168,0.3); color: var(--pistachio); }
.sz-kg-tab.active {
  background: rgba(186,217,168,0.12);
  border-color: rgba(186,217,168,0.3);
  color: var(--pistachio); font-weight: 600;
}
.sz-kg-canvas-wrap {
  position: relative;
  max-width: 900px;
  margin: 0 auto;
  height: 520px;
  border-radius: 20px;
  background: rgba(0,26,13,0.4);
  border: 1px solid rgba(186,217,168,0.08);
  overflow: hidden;
}
.sz-kg-canvas {
  width: 100%; height: 100%;
  display: block;
}
.sz-kg-tooltip {
  position: absolute;
  padding: 12px 16px;
  background: rgba(0,32,14,0.95);
  border: 1px solid rgba(186,217,168,0.2);
  border-radius: 10px;
  backdrop-filter: blur(12px);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 10;
  min-width: 140px;
}
.sz-kg-tooltip.active { opacity: 1; }
.sz-kg-tooltip-type {
  font-size: 10px; font-weight: 600;
  letter-spacing: 1.5px; text-transform: uppercase;
  margin-bottom: 4px;
}
.sz-kg-tooltip-name {
  font-size: 14px; font-weight: 600;
  color: var(--offwhite);
  margin-bottom: 2px;
}
.sz-kg-tooltip-sub {
  font-size: 12px;
  color: rgba(223,220,215,0.5);
}

/* ================================================================
   DIFFERENTIATORS
   ================================================================ */
.sz-diff {
  padding: 100px 0;
  background: var(--bg);
}
.sz-diff-grid {
  display: grid; grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}
.sz-diff-card {
  background: var(--white);
  border: 1.5px solid rgba(0,48,23,0.06);
  border-radius: 20px;
  padding: 40px 36px;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}
.sz-diff-card:hover {
  border-color: rgba(186,217,168,0.35);
  transform: translateY(-4px);
  box-shadow: 0 16px 48px rgba(0,48,23,0.08);
}
.sz-diff-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--pistachio), rgba(186,217,168,0.2));
  opacity: 0;
  transition: opacity 0.3s ease;
}
.sz-diff-card:hover::before { opacity: 1; }
.sz-diff-icon {
  width: 52px; height: 52px;
  border-radius: 40% 60% 55% 45% / 55% 45% 60% 40%;
  background: rgba(186,217,168,0.1);
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 20px;
  transition: all 0.4s ease;
}
.sz-diff-card:nth-child(2) .sz-diff-icon { border-radius: 55% 45% 40% 60% / 45% 55% 50% 50%; }
.sz-diff-card:nth-child(3) .sz-diff-icon { border-radius: 50% 50% 45% 55% / 60% 40% 55% 45%; }
.sz-diff-card:nth-child(4) .sz-diff-icon { border-radius: 45% 55% 60% 40% / 50% 50% 40% 60%; }
.sz-diff-card:hover .sz-diff-icon {
  background: rgba(186,217,168,0.18);
  transform: scale(1.08) rotate(-3deg);
}
.sz-diff-card h3 {
  font-family: var(--font-display);
  font-size: 20px; font-weight: 600;
  color: var(--charcoal);
  letter-spacing: -0.8px;
  margin-bottom: 12px;
}
.sz-diff-card p {
  font-size: 16px; line-height: 1.7;
  color: rgba(26,29,27,0.55);
}

/* ================================================================
   ENABLES
   ================================================================ */
.sz-enables {
  padding: 100px 0;
  background: var(--pistachio-light);
  position: relative; overflow: hidden;
}
.sz-enables-grid {
  display: grid; grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}
.sz-enables-card {
  background: var(--white);
  border: 1.5px solid rgba(0,48,23,0.08);
  border-radius: 20px;
  padding: 36px 32px;
  transition: all 0.4s ease;
}
.sz-enables-card:hover {
  border-color: var(--forest);
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(0,48,23,0.1);
}
.sz-enables-card-icon {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: rgba(0,48,23,0.06);
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 20px;
}
.sz-enables-card h3 {
  font-family: var(--font-display);
  font-size: 18px; font-weight: 600;
  color: var(--charcoal);
  letter-spacing: -0.5px;
  margin-bottom: 10px;
}
.sz-enables-card p {
  font-size: 16px; line-height: 1.65;
  color: rgba(26,29,27,0.55);
}
.sz-enables-card--more {
  background: rgba(0,48,23,0.04);
  border-style: dashed;
}

/* ================================================================
   TRUST
   ================================================================ */
.sz-trust {
  padding: 100px 0;
  background: var(--bg-warm);
}
.sz-trust-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}
.sz-trust-card {
  padding: 36px 0;
  border-top: 2px solid var(--forest);
}
.sz-trust-card h3 {
  font-family: var(--font-display);
  font-size: 17px; font-weight: 600;
  color: var(--charcoal);
  letter-spacing: -0.5px;
  margin-bottom: 12px;
}
.sz-trust-card p {
  font-size: 16px; line-height: 1.7;
  color: rgba(26,29,27,0.55);
}
.sz-trust-chain {
  margin-top: 56px;
  display: flex; align-items: center; justify-content: center;
  gap: 0;
}
.sz-trust-chain-node {
  display: flex; flex-direction: column; align-items: center; gap: 8px;
  padding: 20px 24px;
  background: var(--white);
  border: 1.5px solid rgba(0,48,23,0.08);
  border-radius: 14px;
  min-width: 120px;
  text-align: center;
  transition: all 0.3s ease;
}
.sz-trust-chain-node:hover {
  border-color: rgba(186,217,168,0.4);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0,48,23,0.06);
}
.sz-trust-chain-node-label {
  font-size: 13px; font-weight: 600;
  color: var(--charcoal);
}
.sz-trust-chain-node-sub {
  font-size: 11px;
  color: rgba(26,29,27,0.4);
}
.sz-trust-chain-arrow {
  display: flex; align-items: center;
  padding: 0 8px;
  color: var(--pistachio);
  opacity: 0.5;
}

/* ================================================================
   DATA SOURCES
   ================================================================ */
.sz-sources {
  padding: 100px 0;
  background: var(--forest);
  position: relative; overflow: hidden;
}
.sz-sources-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  max-width: 800px;
  margin: 0 auto;
}
.sz-source-card {
  background: rgba(186,217,168,0.04);
  border: 1px solid rgba(186,217,168,0.1);
  border-radius: 14px;
  padding: 28px 24px;
  display: flex; align-items: flex-start; gap: 16px;
  transition: all 0.4s ease;
}
.sz-source-card:hover {
  background: rgba(186,217,168,0.08);
  border-color: rgba(186,217,168,0.2);
  transform: translateY(-3px);
}
.sz-source-icon {
  width: 40px; height: 40px;
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.sz-source-card h4 {
  font-size: 15px; font-weight: 600;
  color: var(--pistachio);
  margin-bottom: 4px;
}
.sz-source-card p {
  font-size: 13px; line-height: 1.5;
  color: rgba(186,217,168,0.4);
}
.sz-source-card--more {
  border-style: dashed;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  text-align: center;
  gap: 8px;
}
.sz-source-card--more h4 {
  font-size: 14px;
  color: rgba(186,217,168,0.5);
}
.sz-source-card--more p {
  font-size: 12px;
  color: rgba(186,217,168,0.3);
}

/* ================================================================
   CTA
   ================================================================ */
.sz-cta {
  padding: 96px 0;
  background: var(--forest-deep);
  text-align: center;
  position: relative; overflow: hidden;
}
.sz-cta .container { position: relative; z-index: 1; }
.sz-cta-title {
  font-family: var(--font-display);
  font-size: clamp(32px, 4vw, 48px);
  font-weight: 600; line-height: 1.1;
  color: var(--offwhite);
  letter-spacing: -2px;
  margin-bottom: 20px;
}
.sz-cta-title em { font-style: italic; color: var(--pistachio); }
.sz-cta-sub {
  font-size: 17px; line-height: 1.65;
  color: rgba(223,220,215,0.55);
  max-width: 500px; margin: 0 auto 40px;
}

/* ================================================================
   FOOTER
   ================================================================ */
.footer {
  background: var(--forest);
  padding: 64px 0 40px;
  position: relative;
}
.footer-inner { max-width: var(--max-w); margin: 0 auto; padding: 0 40px; }
.footer-top { display: flex; justify-content: space-between; gap: 40px; }
.footer-left { max-width: 400px; }
.footer-brand { margin-bottom: 16px; }
.footer-logo-placeholder { height: 28px; width: auto; }
.footer-description {
  font-size: 15px; line-height: 1.6;
  color: rgba(186,217,168,0.35);
  margin-bottom: 20px;
}
.footer-icons { display: flex; gap: 16px; }
.footer-icons a {
  color: rgba(186,217,168,0.3);
  transition: color 0.2s ease;
}
.footer-icons a:hover { color: var(--pistachio); }
.footer-right { padding-top: 4px; }
.footer-heading {
  font-family: var(--font-display);
  font-size: 12px; font-weight: 600;
  letter-spacing: 1.5px; text-transform: uppercase;
  color: rgba(186,217,168,0.3);
  margin-bottom: 16px;
}
.footer-nav { display: flex; flex-direction: column; gap: 10px; }
.footer-link {
  font-size: 15px; color: rgba(186,217,168,0.4);
  transition: color 0.2s ease;
}
.footer-link:hover { color: var(--pistachio); }
.footer-divider {
  height: 1px;
  background: rgba(186,217,168,0.08);
  margin: 40px 0 24px;
}
.footer-bottom {
  display: flex; justify-content: space-between; align-items: center;
}
.footer-copyright {
  font-size: 13px;
  color: rgba(186,217,168,0.2);
}
.footer-legal { display: flex; gap: 24px; }
.footer-legal-link {
  font-size: 13px;
  color: rgba(186,217,168,0.2);
  transition: color 0.2s ease;
}
.footer-legal-link:hover { color: rgba(186,217,168,0.5); }
</style>
</head>
<body>
<script>
if (window.innerWidth <= 768) {
  window.location.replace('mobile.html');
}
</script>

<!-- NAV -->
<nav class="nav at-top" id="mainNav">
  <div class="nav-inner">
    <a href="/" class="nav-brand">
      <img src="../assets/logos/Valae-WM-Pistachio.png" alt="Valae" style="height: 32px; width: auto; object-fit: contain;">
    </a>
    <div class="nav-links">
      <a href="/" class="nav-link">Home</a>
      <a href="/step-zero" class="nav-link active">Step Zero</a>
      <a href="/about" class="nav-link">About</a>
      <a href="/contact" class="nav-link">Contact</a>
    </div>
    <a href="/contact" class="nav-cta" onclick="gtag('event', 'cta_click', { button_name: 'sz_header_book_demo' });">
      Book a demo
      <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </a>
  </div>
</nav>

<!-- ================================================================
     HERO
     ================================================================ -->
<section class="sz-hero grain">
  <canvas class="sz-hero-canvas" id="heroCanvas"></canvas>
  <div class="sz-hero-overlay"></div>
  <div class="sz-hero-content">
    <div class="sz-hero-badge fade-up">
      <span class="sz-hero-badge-dot"></span>
      Knowledge engine
    </div>
    <h1 class="fade-up fade-up-d1">The engine that makes<br>your AI <em>actually work</em></h1>
    <p class="sz-hero-sub fade-up fade-up-d2">Step Zero reads your files and systems, maps the people, processes, and facts inside them, and builds a connected knowledge layer that powers every AI tool on top.</p>
    <div class="sz-hero-cta fade-up fade-up-d3">
      <a href="/contact" class="btn-primary" onclick="gtag('event', 'cta_click', { button_name: 'sz_hero_book_demo' });">
        Book a demo
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
      <a href="#pipeline" class="btn-ghost">See how it works</a>
    </div>
  </div>
</section>

<!-- ================================================================
     THE PROBLEM
     ================================================================ -->
<section class="sz-problem" style="position:relative;overflow:hidden;">
  <svg class="sz-organic-accent" style="top:-40px;right:-60px;width:360px;height:360px;" viewBox="0 0 360 360" fill="none">
    <circle cx="180" cy="180" r="60" stroke="#003017" stroke-width="0.8"/>
    <circle cx="180" cy="180" r="100" stroke="#003017" stroke-width="0.6"/>
    <circle cx="180" cy="180" r="145" stroke="#003017" stroke-width="0.4"/>
    <circle cx="175" cy="185" r="40" stroke="#BAD9A8" stroke-width="0.5" stroke-dasharray="4 6"/>
    <circle cx="185" cy="175" r="80" stroke="#BAD9A8" stroke-width="0.4" stroke-dasharray="3 8"/>
    <circle cx="180" cy="180" r="120" stroke="#BAD9A8" stroke-width="0.3" stroke-dasharray="2 10"/>
  </svg>
  <div class="container" style="position:relative;z-index:1;">
    <div class="section-label reveal">The problem</div>
    <h2 class="section-title reveal">AI without context<br>is just <em>guessing</em></h2>
    <p class="section-sub reveal">Most AI tools treat your company data like a pile of text to search through. They find words, not meaning.</p>
    <div class="sz-problem-grid">
      <div class="sz-problem-card reveal reveal-d1">
        <div class="sz-problem-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="2" y="3" width="8" height="10" rx="1.5" stroke="#003017" stroke-width="1.5"/><rect x="14" y="3" width="8" height="6" rx="1.5" stroke="#003017" stroke-width="1.5" opacity="0.5"/><rect x="14" y="13" width="8" height="8" rx="1.5" stroke="#003017" stroke-width="1.5" opacity="0.3"/><rect x="2" y="17" width="8" height="4" rx="1.5" stroke="#003017" stroke-width="1.5" opacity="0.4"/></svg>
        </div>
        <h3>Scattered knowledge</h3>
        <p>Your data lives in dozens of disconnected systems. Documents, spreadsheets, emails, chat, CRMs — none of them know about each other.</p>
      </div>
      <div class="sz-problem-card reveal reveal-d2">
        <div class="sz-problem-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="#003017" stroke-width="1.5"/><path d="M12 7v5l3 3" stroke="#003017" stroke-width="1.5" stroke-linecap="round"/><path d="M6 12h2M16 12h2" stroke="#003017" stroke-width="1.5" stroke-linecap="round" opacity="0.3"/></svg>
        </div>
        <h3>Surface-level understanding</h3>
        <p>Search finds text matches. It can't tell that "Jane Park", "J. Park", and "the CFO" are the same person, or connect a product in an email to the one in your roadmap.</p>
      </div>
      <div class="sz-problem-card reveal reveal-d3">
        <div class="sz-problem-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7l10 5 10-5-10-5z" stroke="#003017" stroke-width="1.5" stroke-linejoin="round"/><path d="M2 17l10 5 10-5" stroke="#003017" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3"/><path d="M2 12l10 5 10-5" stroke="#003017" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.6"/></svg>
        </div>
        <h3>Fragile AI</h3>
        <p>RAG on unstructured data produces answers that sound confident but aren't grounded. No source chain. No confidence scores. No way to know what's real.</p>
      </div>
    </div>
    <p class="sz-problem-quote reveal">"Data systems see the world as rows and columns. A knowledge graph sees it as connections."</p>
  </div>
</section>

<!-- ================================================================
     THE SOLUTION
     ================================================================ -->
<section class="sz-solution">
  <div class="container">
    <div class="sz-solution-grid">
      <div class="sz-solution-text reveal">
        <div class="section-label">The solution</div>
        <h2 class="section-title">Your files go in.<br><em>A knowledge graph comes out.</em></h2>
        <p>Step Zero ingests your business data — documents, spreadsheets, emails, chat, databases, recordings — and discovers the entities, relationships, and structure inside it.</p>
        <p>No predefined schema. No manual tagging. No configuration. The entities, relationships, and document types emerge from your data through AI-powered extraction and clustering.</p>
        <blockquote style="position:relative;">The ontology isn't an input — it's an output.
          <svg style="position:absolute;bottom:-8px;left:20px;width:160px;height:12px;opacity:0.25;" viewBox="0 0 160 12" fill="none">
            <path d="M2 8 Q20 2 40 7 Q60 12 80 6 Q100 0 120 7 Q140 12 158 5" stroke="#BAD9A8" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
        </blockquote>
      </div>
      <div class="sz-transform reveal reveal-d2" id="szTransform">
        <canvas class="sz-transform-canvas" id="transformCanvas"></canvas>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     PIPELINE
     ================================================================ -->
<section class="sz-pipeline" id="pipeline">
  <div class="container">
    <div class="sz-pipeline-header">
      <div class="section-label reveal">Under the hood</div>
      <h2 class="section-title reveal" style="text-align:center">Six phases.<br><em>Zero configuration.</em></h2>
      <p class="section-sub reveal" style="text-align:center">Every step is automated. Every decision is auditable. The system requires no schema, no seed data, and no domain expertise.</p>
    </div>
    <div class="sz-timeline">
      <div class="sz-timeline-energy"></div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">01</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Connect your data</h3>
          <p class="sz-step-desc">Point Step Zero at your data sources. Documents, spreadsheets, emails, chat logs, databases, CRM records, recordings — any format, any system. Modality-specific adapters handle the rest.</p>
          <div class="sz-step-tags">
            <span class="sz-step-tag">Word</span>
            <span class="sz-step-tag">PDF</span>
            <span class="sz-step-tag">Excel</span>
            <span class="sz-step-tag">Email</span>
            <span class="sz-step-tag">Slack</span>
            <span class="sz-step-tag">CRM</span>
            <span class="sz-step-tag">+more</span>
          </div>
        </div>
      </div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">02</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Normalize and chunk</h3>
          <p class="sz-step-desc">Every file type is parsed through modality-specific adapters into a common representation. Adaptive chunking splits content at meaningful boundaries — headings, topics, tables — preserving context and coherence.</p>
        </div>
      </div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">03</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Extract entities and relationships</h3>
          <p class="sz-step-desc">AI reads every chunk and identifies the entities and relationships inside it — people, products, processes, events, organizations. The extraction is deliberately open-ended: no predefined ontology constrains what gets found.</p>
        </div>
      </div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">04</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Resolve and deduplicate</h3>
          <p class="sz-step-desc">Duplicate mentions collapse. "Jane Park", "J. Park", and "the CFO" merge into one canonical entity. Entity types, relationship types, and document categories cluster and refine through AI-powered resolution — embedding similarity, contextual signals, and LLM validation working together.</p>
          <div class="sz-step-resolution" aria-hidden="true">
            <div class="sz-res-mentions">
              <div class="sz-res-mention">Jane Park</div>
              <div class="sz-res-mention">J. Park</div>
              <div class="sz-res-mention">"the CFO"</div>
            </div>
            <div class="sz-res-arrow-wrap">
              <svg width="44" height="52" viewBox="0 0 44 52" fill="none">
                <path d="M6 6C16 6 28 26 32 26" stroke="#BAD9A8" stroke-width="1.2" fill="none" stroke-dasharray="3 4" opacity="0.5"/>
                <path d="M6 26L32 26" stroke="#BAD9A8" stroke-width="1.2" fill="none" stroke-dasharray="3 4" opacity="0.5"/>
                <path d="M6 46C16 46 28 26 32 26" stroke="#BAD9A8" stroke-width="1.2" fill="none" stroke-dasharray="3 4" opacity="0.5"/>
                <circle cx="36" cy="26" r="5" fill="#003017" stroke="#BAD9A8" stroke-width="1.5"/>
                <circle cx="36" cy="26" r="2" fill="#BAD9A8"/>
              </svg>
            </div>
            <div class="sz-res-entity">
              <strong>Jane Park</strong>
              <span>CEO · Confidence: 0.97</span>
            </div>
          </div>
        </div>
      </div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">05</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Structure the graph</h3>
          <p class="sz-step-desc">A coherent knowledge graph crystallizes. Extraction schemas emerge per document type. Targeted re-extraction fills gaps. The ontology — entity types, relationship types, document categories — is an output of the process, not an input.</p>
        </div>
      </div>

      <div class="sz-step reveal">
        <div class="sz-step-dot">06</div>
        <div class="sz-step-content">
          <h3 class="sz-step-title">Serve your AI tools</h3>
          <p class="sz-step-desc">The graph powers any downstream application — assistants, automations, chatbots, search, analytics. Incremental updates keep it current as new data arrives. No full re-processing. No downtime.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     KNOWLEDGE GRAPH
     ================================================================ -->
<section class="sz-kg grain">
  <div class="container">
    <div class="sz-kg-header">
      <div class="section-label section-label--light reveal">The result</div>
      <h2 class="section-title section-title--light reveal">A living map of everything<br>your company <em>knows</em></h2>
      <p class="section-sub section-sub--light reveal" style="margin-left:auto;margin-right:auto;text-align:center">Not a static database. Not a document store. A connected, queryable representation of your entire business — people, products, processes, and the relationships between them.</p>
      <div class="sz-kg-tabs reveal">
        <button class="sz-kg-tab active" data-filter="all">All</button>
        <button class="sz-kg-tab" data-filter="person">People</button>
        <button class="sz-kg-tab" data-filter="product">Products</button>
        <button class="sz-kg-tab" data-filter="process">Processes</button>
        <button class="sz-kg-tab" data-filter="document">Documents</button>
      </div>
    </div>
    <div class="sz-kg-canvas-wrap reveal" id="kgWrap">
      <canvas class="sz-kg-canvas" id="kgCanvas"></canvas>
      <div class="sz-kg-tooltip" id="kgTooltip">
        <div class="sz-kg-tooltip-type" id="kgTooltipType"></div>
        <div class="sz-kg-tooltip-name" id="kgTooltipName"></div>
        <div class="sz-kg-tooltip-sub" id="kgTooltipSub"></div>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     DIFFERENTIATORS
     ================================================================ -->
<section class="sz-diff" style="position:relative;overflow:hidden;">
  <svg class="sz-organic-accent" style="bottom:-80px;left:-100px;width:400px;height:400px;" viewBox="0 0 400 400" fill="none">
    <path d="M200 40 Q280 80 320 160 Q360 240 300 300 Q240 360 160 340 Q80 320 40 240 Q0 160 60 100 Q120 40 200 40Z" stroke="#003017" stroke-width="0.6" fill="none"/>
    <path d="M200 80 Q260 110 290 170 Q320 230 280 280 Q240 320 175 305 Q110 290 80 230 Q50 170 90 120 Q130 70 200 80Z" stroke="#BAD9A8" stroke-width="0.4" fill="none" stroke-dasharray="5 8"/>
    <path d="M200 120 Q240 140 260 180 Q280 220 260 255 Q240 280 200 270 Q160 260 140 225 Q120 190 140 155 Q160 120 200 120Z" stroke="#003017" stroke-width="0.5" fill="none"/>
  </svg>
  <div class="container" style="position:relative;z-index:1;">
    <div class="section-label reveal">Why Step Zero</div>
    <h2 class="section-title reveal">Built <em>different.</em></h2>
    <p class="section-sub reveal">Not just another RAG pipeline. A fundamentally different approach to making AI understand your business.</p>
    <div class="sz-diff-grid">
      <div class="sz-diff-card reveal reveal-d1">
        <div class="sz-diff-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 2C12.5 5.6 14.4 7.5 18 8 14.4 8.5 12.5 10.4 12 14 11.5 10.4 9.6 8.5 6 8 9.6 7.5 11.5 5.6 12 2Z" fill="#003017"/><path d="M19 13c.3 2 1.4 3.1 3.4 3.4-2 .3-3.1 1.4-3.4 3.4-.3-2-1.4-3.1-3.4-3.4 2-.3 3.1-1.4 3.4-3.4Z" fill="#003017" opacity="0.4"/></svg>
        </div>
        <h3>Zero configuration</h3>
        <p>No predefined schema. No seed data. No domain knowledge required. Point it at your files and the structure emerges. The ontology is discovered, not designed.</p>
      </div>
      <div class="sz-diff-card reveal reveal-d2">
        <div class="sz-diff-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 20V12M12 12L7 17M12 12l5 5" stroke="#003017" stroke-width="1.5" stroke-linecap="round"/><circle cx="7" cy="17" r="2" stroke="#003017" stroke-width="1.5"/><circle cx="17" cy="17" r="2" stroke="#003017" stroke-width="1.5"/><circle cx="12" cy="4" r="2" stroke="#003017" stroke-width="1.5"/><circle cx="12" cy="12" r="2" fill="#003017"/></svg>
        </div>
        <h3>Bottom-up intelligence</h3>
        <p>Entity types, relationships, and document categories aren't defined up front — they're discovered through AI-powered extraction and clustering. Structure emerges from data, not templates.</p>
      </div>
      <div class="sz-diff-card reveal reveal-d3">
        <div class="sz-diff-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="8" y="14" width="8" height="8" rx="1" stroke="#003017" stroke-width="1.5"/><rect x="4" y="8" width="16" height="14" rx="1.5" stroke="#003017" stroke-width="1.5" opacity="0.4"/><rect x="1" y="2" width="22" height="20" rx="2" stroke="#003017" stroke-width="1.5" opacity="0.15"/></svg>
        </div>
        <h3>Any scale</h3>
        <p>The same architecture handles a 20-document pilot and a million-document enterprise corpus. Adaptive parallelism, incremental processing, and resume from any failure point.</p>
      </div>
      <div class="sz-diff-card reveal reveal-d4">
        <div class="sz-diff-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="7" height="7" rx="2" stroke="#003017" stroke-width="1.5"/><rect x="14" y="3" width="7" height="7" rx="2" stroke="#003017" stroke-width="1.5"/><rect x="3" y="14" width="7" height="7" rx="2" stroke="#003017" stroke-width="1.5"/><rect x="14" y="14" width="7" height="7" rx="2" stroke="#003017" stroke-width="1.5"/><path d="M10 6.5h4M6.5 10v4M17.5 10v4M10 17.5h4" stroke="#003017" stroke-width="1" stroke-linecap="round" stroke-dasharray="2 2" opacity="0.4"/></svg>
        </div>
        <h3>No vendor lock-in</h3>
        <p>Frontier LLMs for reasoning, specialized models for extraction, your choice of embedding provider and graph store. Swap any component without rebuilding.</p>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     WHAT IT ENABLES
     ================================================================ -->
<section class="sz-enables grain" style="position:relative;overflow:hidden;">
  <svg class="sz-organic-accent" style="top:20px;right:-40px;width:280px;height:280px;opacity:0.025;" viewBox="0 0 280 280" fill="none">
    <line x1="0" y1="40" x2="280" y2="40" stroke="#003017" stroke-width="0.8"/>
    <line x1="0" y1="90" x2="280" y2="80" stroke="#003017" stroke-width="0.6"/>
    <line x1="0" y1="140" x2="280" y2="135" stroke="#003017" stroke-width="0.8"/>
    <line x1="0" y1="190" x2="280" y2="195" stroke="#003017" stroke-width="0.6"/>
    <line x1="0" y1="240" x2="280" y2="240" stroke="#003017" stroke-width="0.8"/>
    <line x1="40" y1="0" x2="35" y2="280" stroke="#003017" stroke-width="0.5"/>
    <line x1="140" y1="0" x2="145" y2="280" stroke="#003017" stroke-width="0.5"/>
    <line x1="240" y1="0" x2="238" y2="280" stroke="#003017" stroke-width="0.5"/>
  </svg>
  <div class="container" style="position:relative;z-index:1;">
    <div class="section-label reveal">What it powers</div>
    <h2 class="section-title reveal">One foundation.<br><em>Every AI tool.</em></h2>
    <p class="section-sub reveal">The foundation is the hard part. Once it's built, every tool you add runs on the same knowledge layer — faster and cheaper each time.</p>
    <div class="sz-enables-grid">
      <div class="sz-enables-card reveal reveal-d1">
        <div class="sz-enables-card-icon">
          <svg width="20" height="20" viewBox="0 0 22 22" fill="none"><path d="M11 4C11.5 7.6 13.4 9.5 17 10 13.4 10.5 11.5 12.4 11 16 10.5 12.4 8.6 10.5 5 10 8.6 9.5 10.5 7.6 11 4Z" fill="#003017"/></svg>
        </div>
        <h3>Knowledge assistant</h3>
        <p>Ask anything about your business and get instant, source-cited answers. Every response traces back to specific documents with confidence scores.</p>
      </div>
      <div class="sz-enables-card reveal reveal-d2">
        <div class="sz-enables-card-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M2 6h20v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" stroke="#003017" stroke-width="1.5"/><path d="M2 6l10 7 10-7" stroke="#003017" stroke-width="1.5"/></svg>
        </div>
        <h3>Email automation</h3>
        <p>Automate customer communications with AI that actually understands your products, policies, and history. Not generic responses — grounded ones.</p>
      </div>
      <div class="sz-enables-card reveal reveal-d3">
        <div class="sz-enables-card-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.66 0 3-4.03 3-9s-1.34-9-3-9m0 18c-1.66 0-3-4.03-3-9s1.34-9 3-9m-9 9a9 9 0 019-9" stroke="#003017" stroke-width="1.5"/></svg>
        </div>
        <h3>Customer chatbot</h3>
        <p>Deploy customer-facing AI that answers from your knowledge base. Accurate, confident, always current — with every answer traceable to its source.</p>
      </div>
      <div class="sz-enables-card sz-enables-card--more reveal reveal-d4">
        <div class="sz-enables-card-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="1.5" fill="#003017"/><circle cx="6" cy="12" r="1.5" fill="#003017" opacity="0.5"/><circle cx="18" cy="12" r="1.5" fill="#003017" opacity="0.5"/></svg>
        </div>
        <h3>And everything else</h3>
        <p>Custom agents, workflow automation, analytics, internal search — any application that needs to understand your business runs on the same foundation.</p>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     TRUST & GOVERNANCE
     ================================================================ -->
<section class="sz-trust">
  <div class="container">
    <div class="section-label reveal">Trust &amp; governance</div>
    <h2 class="section-title reveal">Every answer traces<br>back to <em>a source</em></h2>
    <p class="section-sub reveal">Confidence isn't a feeling. It's a number that propagates through every layer of the system.</p>
    <div class="sz-trust-grid">
      <div class="sz-trust-card reveal reveal-d1">
        <h3>Source-cited everything</h3>
        <p>Every entity, relationship, and answer traces back to specific document chunks. Confidence scores propagate from extraction through resolution to the final response.</p>
      </div>
      <div class="sz-trust-card reveal reveal-d2">
        <h3>Complete audit trail</h3>
        <p>Every merge, split, and classification decision is logged with the AI's reasoning. Full reproducibility. Know exactly why the system made every choice.</p>
      </div>
      <div class="sz-trust-card reveal reveal-d3">
        <h3>Permission-aware</h3>
        <p>Respects source-level access controls out of the box. Users and AI tools only surface information they're authorized to see. No leaking across permission boundaries.</p>
      </div>
    </div>
    <div class="sz-trust-chain reveal">
      <div class="sz-trust-chain-node">
        <svg width="20" height="20" viewBox="0 0 22 22" fill="none"><path d="M11 4C11.5 7.6 13.4 9.5 17 10 13.4 10.5 11.5 12.4 11 16 10.5 12.4 8.6 10.5 5 10 8.6 9.5 10.5 7.6 11 4Z" fill="#003017"/></svg>
        <span class="sz-trust-chain-node-label">AI Answer</span>
        <span class="sz-trust-chain-node-sub">Confidence: 0.94</span>
      </div>
      <div class="sz-trust-chain-arrow">
        <svg width="24" height="12" viewBox="0 0 24 12" fill="none"><path d="M0 6h20M16 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
      <div class="sz-trust-chain-node">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="8" r="4" stroke="#003017" stroke-width="1.5"/><path d="M6 20c0-3.3 2.7-6 6-6s6 2.7 6 6" stroke="#003017" stroke-width="1.5"/></svg>
        <span class="sz-trust-chain-node-label">Entity</span>
        <span class="sz-trust-chain-node-sub">Jane Park (CEO)</span>
      </div>
      <div class="sz-trust-chain-arrow">
        <svg width="24" height="12" viewBox="0 0 24 12" fill="none"><path d="M0 6h20M16 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
      <div class="sz-trust-chain-node">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="2" stroke="#003017" stroke-width="1.5"/><path d="M7 8h10M7 12h10M7 16h6" stroke="#003017" stroke-width="1.2" stroke-linecap="round" opacity="0.5"/></svg>
        <span class="sz-trust-chain-node-label">Chunk</span>
        <span class="sz-trust-chain-node-sub">Para 3, Section 2</span>
      </div>
      <div class="sz-trust-chain-arrow">
        <svg width="24" height="12" viewBox="0 0 24 12" fill="none"><path d="M0 6h20M16 2l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
      <div class="sz-trust-chain-node">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 2h8l4 4v14a2 2 0 01-2 2H6a2 2 0 01-2-2V4a2 2 0 012-2z" stroke="#003017" stroke-width="1.5"/><path d="M14 2v4h4" stroke="#003017" stroke-width="1.5"/></svg>
        <span class="sz-trust-chain-node-label">Document</span>
        <span class="sz-trust-chain-node-sub">Q4-report.pdf</span>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     DATA SOURCES
     ================================================================ -->
<section class="sz-sources grain">
  <div class="container">
    <div style="text-align:center; margin-bottom:48px;">
      <div class="section-label section-label--light reveal">What it reads</div>
      <h2 class="section-title section-title--light reveal" style="margin-left:auto;margin-right:auto">Any file. <em>Any system.</em></h2>
      <p class="section-sub section-sub--light reveal" style="margin-left:auto;margin-right:auto;text-align:center">Step Zero handles every format your business actually uses. Modality-specific adapters parse each one into a common representation.</p>
    </div>
    <div class="sz-sources-grid">
      <div class="sz-source-card reveal reveal-d1">
        <div class="sz-source-icon" style="background:rgba(100,160,255,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 2h7l4 4v11a1 1 0 01-1 1H5a1 1 0 01-1-1V3a1 1 0 011-1z" stroke="rgba(100,160,255,0.8)" stroke-width="1.3"/><path d="M12 2v4h4" stroke="rgba(100,160,255,0.8)" stroke-width="1.3"/><path d="M6 9h8M6 12h8M6 15h5" stroke="rgba(100,160,255,0.8)" stroke-width="1" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h4>Documents</h4>
          <p>Word, PDF, TXT, Markdown</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d2">
        <div class="sz-source-icon" style="background:rgba(80,200,120,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><rect x="2" y="2" width="16" height="16" rx="2" stroke="rgba(80,200,120,0.8)" stroke-width="1.3"/><path d="M2 7h16M2 12h16M7 2v16" stroke="rgba(80,200,120,0.8)" stroke-width="1" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h4>Spreadsheets</h4>
          <p>Excel, CSV, Google Sheets</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d3">
        <div class="sz-source-icon" style="background:rgba(255,170,60,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M2 5h16v11a1 1 0 01-1 1H3a1 1 0 01-1-1V5z" stroke="rgba(255,170,60,0.8)" stroke-width="1.3"/><path d="M2 5l8 6 8-6" stroke="rgba(255,170,60,0.8)" stroke-width="1.3"/></svg>
        </div>
        <div>
          <h4>Emails</h4>
          <p>Any IMAP/SMTP provider</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d4">
        <div class="sz-source-icon" style="background:rgba(150,120,255,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M2 5h16v9a2 2 0 01-2 2H4a2 2 0 01-2-2V5z" stroke="rgba(150,120,255,0.8)" stroke-width="1.3"/><path d="M6 9h8M6 12h5" stroke="rgba(150,120,255,0.8)" stroke-width="1" stroke-linecap="round"/><circle cx="5" cy="3" r="1" fill="rgba(150,120,255,0.8)"/><circle cx="10" cy="3" r="1" fill="rgba(150,120,255,0.8)"/><circle cx="15" cy="3" r="1" fill="rgba(150,120,255,0.8)"/></svg>
        </div>
        <div>
          <h4>Chat &amp; messages</h4>
          <p>Slack, Teams, Discord</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d5">
        <div class="sz-source-icon" style="background:rgba(220,80,80,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><ellipse cx="10" cy="6" rx="7" ry="3" stroke="rgba(220,80,80,0.8)" stroke-width="1.3"/><path d="M3 6v4c0 1.66 3.13 3 7 3s7-1.34 7-3V6" stroke="rgba(220,80,80,0.8)" stroke-width="1.3"/><path d="M3 10v4c0 1.66 3.13 3 7 3s7-1.34 7-3v-4" stroke="rgba(220,80,80,0.8)" stroke-width="1.3"/></svg>
        </div>
        <div>
          <h4>Databases</h4>
          <p>CRM, ERP, custom SQL</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d6">
        <div class="sz-source-icon" style="background:rgba(80,180,220,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><rect x="2" y="3" width="16" height="12" rx="2" stroke="rgba(80,180,220,0.8)" stroke-width="1.3"/><circle cx="10" cy="9" r="3" stroke="rgba(80,180,220,0.8)" stroke-width="1.2"/><path d="M2 17l4-2h8l4 2" stroke="rgba(80,180,220,0.8)" stroke-width="1" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h4>Video &amp; audio</h4>
          <p>Calls, recordings, meetings</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d7">
        <div class="sz-source-icon" style="background:rgba(200,160,60,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="7" stroke="rgba(200,160,60,0.8)" stroke-width="1.3"/><path d="M4 10h12M10 4c-2 2-3 4-3 6s1 4 3 6M10 4c2 2 3 4 3 6s-1 4-3 6" stroke="rgba(200,160,60,0.8)" stroke-width="1" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h4>Web pages</h4>
          <p>Public sites, intranets</p>
        </div>
      </div>
      <div class="sz-source-card reveal reveal-d8">
        <div class="sz-source-icon" style="background:rgba(120,200,180,0.1);">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M4 4h12v3H4z" stroke="rgba(120,200,180,0.8)" stroke-width="1.3" stroke-linejoin="round"/><path d="M4 10h12v3H4z" stroke="rgba(120,200,180,0.8)" stroke-width="1.3" stroke-linejoin="round" opacity="0.6"/><path d="M10 7v3M10 13v3" stroke="rgba(120,200,180,0.8)" stroke-width="1.2" stroke-linecap="round"/></svg>
        </div>
        <div>
          <h4>API connections</h4>
          <p>REST, GraphQL, webhooks</p>
        </div>
      </div>
      <div class="sz-source-card sz-source-card--more reveal reveal-d8">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="rgba(186,217,168,0.3)" stroke-width="1.5" stroke-dasharray="3 3"/><path d="M12 8v8M8 12h8" stroke="rgba(186,217,168,0.4)" stroke-width="1.5" stroke-linecap="round"/></svg>
        <h4>And more</h4>
        <p>Custom formats, proprietary systems — if it has data, Step Zero can read it.</p>
      </div>
    </div>
  </div>
</section>

<!-- ================================================================
     CTA
     ================================================================ -->
<section class="sz-cta grain">
  <div class="container">
    <p class="reveal" style="font-family: var(--font-display); font-size: 13px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--pistachio); opacity: 0.5; margin-bottom: 20px;">Build solid foundations</p>
    <h2 class="sz-cta-title reveal">Ready to <em>future-proof</em><br>for the AI era?</h2>
    <p class="sz-cta-sub reveal">It starts with a 15-minute demo.</p>
    <div class="reveal">
      <a href="/contact" class="btn-primary" onclick="gtag('event', 'cta_click', { button_name: 'sz_cta_book_demo' });" style="font-size:18px; padding: 18px 40px;">
        Book a demo
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
    </div>
  </div>
</section>

<!-- ================================================================
     FOOTER
     ================================================================ -->
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-top">
      <div class="footer-left">
        <div class="footer-brand">
          <img class="footer-logo-placeholder" src="../assets/logos/Valae-WM-Pistachio.png" alt="Valae">
        </div>
        <p class="footer-description">Valae turns scattered company knowledge into a structured foundation, powering assistants, automations, chatbots, and more.</p>
        <div class="footer-icons">
          <a href="mailto:info@valae.ai" aria-label="Email">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M22 4L12 13 2 4"/></svg>
          </a>
          <a href="https://www.linkedin.com/company/valae-ai/" target="_blank" aria-label="LinkedIn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
        </div>
      </div>
      <div class="footer-right">
        <h4 class="footer-heading">Quick Links</h4>
        <nav class="footer-nav">
          <a href="/" class="footer-link">Home</a>
          <a href="/step-zero" class="footer-link">Step Zero</a>
          <a href="/about" class="footer-link">About Us</a>
          <a href="/contact" class="footer-link">Contact</a>
        </nav>
      </div>
    </div>
    <div class="footer-divider"></div>
    <div class="footer-bottom">
      <div class="footer-copyright">&copy; 2026 Valae B.V. All rights reserved.</div>
      <div class="footer-legal">
        <a href="#" class="footer-legal-link">Privacy Policy</a>
        <a href="#" class="footer-legal-link">Terms &amp; Conditions</a>
      </div>
    </div>
  </div>
</footer>

<!-- ================================================================
     JAVASCRIPT
     ================================================================ -->
<script>
/* ----------------------------------------------------------------
   NAV SCROLL
   ---------------------------------------------------------------- */
(function() {
  var nav = document.getElementById('mainNav');
  window.addEventListener('scroll', function() {
    if (window.scrollY > 20) {
      nav.classList.remove('at-top');
      nav.classList.add('scrolled');
    } else {
      nav.classList.remove('scrolled');
      nav.classList.add('at-top');
    }
  });
})();

/* ----------------------------------------------------------------
   SCROLL REVEAL (IntersectionObserver)
   ---------------------------------------------------------------- */
(function() {
  var els = document.querySelectorAll('.reveal');
  if (!els.length || !('IntersectionObserver' in window)) {
    els.forEach(function(el) { el.classList.add('is-visible'); });
    return;
  }
  var obs = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) {
      if (e.isIntersecting) {
        e.target.classList.add('is-visible');
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.12 });
  els.forEach(function(el) { obs.observe(el); });
})();

/* ----------------------------------------------------------------
   HERO CANVAS — Structured knowledge graph with clusters
   ---------------------------------------------------------------- */
(function() {
  var canvas = document.getElementById('heroCanvas');
  if (!canvas) return;
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W, H, nodes = [], edges = [], packets = [], rings = [], t = 0;

  function resize() {
    var p = canvas.parentElement;
    W = p.offsetWidth; H = p.offsetHeight;
    canvas.width = W * dpr; canvas.height = H * dpr;
    canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  function init() {
    resize();
    nodes = []; edges = [];
    var clusters = [
      { cx: 0.14, cy: 0.22, spread: 0.09, count: 5, label: 'DOCUMENTS' },
      { cx: 0.84, cy: 0.18, spread: 0.08, count: 4, label: 'PEOPLE' },
      { cx: 0.50, cy: 0.48, spread: 0.13, count: 7, label: '' },
      { cx: 0.18, cy: 0.78, spread: 0.09, count: 4, label: 'PROCESSES' },
      { cx: 0.80, cy: 0.74, spread: 0.10, count: 5, label: 'PRODUCTS' },
      { cx: 0.40, cy: 0.14, spread: 0.06, count: 3, label: '' },
      { cx: 0.68, cy: 0.85, spread: 0.06, count: 3, label: '' }
    ];
    clusters.forEach(function(c, ci) {
      for (var i = 0; i < c.count; i++) {
        var isHub = i === 0;
        var angle = (i / c.count) * Math.PI * 2 + ci * 0.7;
        var dist = isHub ? 0 : (0.35 + Math.random() * 0.65) * c.spread;
        nodes.push({
          bx: (c.cx + Math.cos(angle) * dist) * W,
          by: (c.cy + Math.sin(angle) * dist) * H,
          x: 0, y: 0,
          r: isHub ? 6 + Math.random() * 4 : 2 + Math.random() * 3,
          isHub: isHub, cluster: ci,
          label: isHub ? c.label : '',
          phase: Math.random() * Math.PI * 2,
          speed: 0.0004 + Math.random() * 0.0004
        });
      }
    });
    nodes.forEach(function(n) { n.x = n.bx; n.y = n.by; });
    for (var ci = 0; ci < clusters.length; ci++) {
      var cn = nodes.filter(function(n) { return n.cluster === ci; });
      for (var i = 1; i < cn.length; i++) edges.push({ a: nodes.indexOf(cn[0]), b: nodes.indexOf(cn[i]) });
    }
    var hubs = [];
    nodes.forEach(function(n, i) { if (n.isHub) hubs.push(i); });
    for (var i = 0; i < hubs.length; i++) {
      for (var j = i + 1; j < hubs.length; j++) {
        var dx = nodes[hubs[i]].bx - nodes[hubs[j]].bx;
        var dy = nodes[hubs[i]].by - nodes[hubs[j]].by;
        if (Math.sqrt(dx * dx + dy * dy) < W * 0.5) edges.push({ a: hubs[i], b: hubs[j] });
      }
    }
    for (var i = 0; i < nodes.length; i++) {
      for (var j = i + 1; j < nodes.length; j++) {
        if (nodes[i].cluster === nodes[j].cluster) continue;
        var dx = nodes[i].bx - nodes[j].bx, dy = nodes[i].by - nodes[j].by;
        if (Math.sqrt(dx * dx + dy * dy) < W * 0.1 && Math.random() < 0.35) edges.push({ a: i, b: j });
      }
    }
  }

  function draw() {
    t++;
    ctx.clearRect(0, 0, W, H);
    nodes.forEach(function(n) {
      n.x = n.bx + Math.sin(t * n.speed + n.phase) * 5;
      n.y = n.by + Math.cos(t * n.speed * 0.7 + n.phase + 1) * 4;
    });

    edges.forEach(function(e) {
      var na = nodes[e.a], nb = nodes[e.b];
      var bothHub = na.isHub && nb.isHub;
      var a = (bothHub ? 0.14 : 0.06) + 0.03 * Math.sin(t * 0.002 + e.a);
      ctx.strokeStyle = 'rgba(186,217,168,' + a + ')';
      ctx.lineWidth = bothHub ? 1.5 : 0.8;
      ctx.beginPath();
      if (bothHub) {
        var mx = (na.x + nb.x) / 2 + (na.y - nb.y) * 0.12;
        var my = (na.y + nb.y) / 2 + (nb.x - na.x) * 0.12;
        ctx.moveTo(na.x, na.y); ctx.quadraticCurveTo(mx, my, nb.x, nb.y);
      } else {
        ctx.moveTo(na.x, na.y); ctx.lineTo(nb.x, nb.y);
      }
      ctx.stroke();
    });

    if (t % 90 === 0) {
      var hn = nodes.filter(function(n) { return n.isHub; });
      var h = hn[Math.floor(Math.random() * hn.length)];
      rings.push({ x: h.x, y: h.y, r: h.r, maxR: 50 + Math.random() * 50, p: 0 });
    }
    for (var ri = rings.length - 1; ri >= 0; ri--) {
      var rn = rings[ri];
      rn.p += 0.007;
      if (rn.p >= 1) { rings.splice(ri, 1); continue; }
      var rr = rn.r + (rn.maxR - rn.r) * rn.p;
      ctx.strokeStyle = 'rgba(186,217,168,' + ((1 - rn.p) * 0.18) + ')';
      ctx.lineWidth = 1;
      ctx.beginPath(); ctx.arc(rn.x, rn.y, rr, 0, Math.PI * 2); ctx.stroke();
    }

    if (t % 12 === 0 && edges.length > 0) {
      var ei = Math.floor(Math.random() * edges.length);
      packets.push({ edge: edges[ei], progress: 0, speed: 0.005 + Math.random() * 0.008 });
    }
    for (var pi = packets.length - 1; pi >= 0; pi--) {
      var pk = packets[pi];
      pk.progress += pk.speed;
      if (pk.progress >= 1) { packets.splice(pi, 1); continue; }
      var pa = nodes[pk.edge.a], pb = nodes[pk.edge.b];
      var px = pa.x + (pb.x - pa.x) * pk.progress;
      var py = pa.y + (pb.y - pa.y) * pk.progress;
      var al = pk.progress < 0.1 ? pk.progress / 0.1 : pk.progress > 0.85 ? (1 - pk.progress) / 0.15 : 0.8;
      for (var ti = 1; ti <= 3; ti++) {
        var tp = pk.progress - ti * 0.025;
        if (tp < 0) continue;
        ctx.fillStyle = 'rgba(186,217,168,' + (al * (1 - ti * 0.28)) + ')';
        ctx.beginPath();
        ctx.arc(pa.x + (pb.x - pa.x) * tp, pa.y + (pb.y - pa.y) * tp, 1.5 - ti * 0.3, 0, Math.PI * 2);
        ctx.fill();
      }
      ctx.save();
      ctx.shadowColor = 'rgba(186,217,168,0.6)'; ctx.shadowBlur = 10;
      ctx.fillStyle = 'rgba(186,217,168,' + al + ')';
      ctx.beginPath(); ctx.arc(px, py, 2.8, 0, Math.PI * 2); ctx.fill();
      ctx.restore();
    }

    nodes.forEach(function(n) {
      var gBase = n.isHub ? 0.45 : 0.22;
      var g = gBase + 0.15 * Math.sin(t * 0.003 + n.phase);
      ctx.save();
      if (n.isHub) {
        var gr = n.r + 10 + 4 * Math.sin(t * 0.002 + n.phase);
        ctx.strokeStyle = 'rgba(186,217,168,' + (g * 0.2) + ')';
        ctx.lineWidth = 0.8;
        ctx.beginPath(); ctx.arc(n.x, n.y, gr, 0, Math.PI * 2); ctx.stroke();
        ctx.shadowColor = 'rgba(186,217,168,0.35)'; ctx.shadowBlur = 16;
      }
      ctx.fillStyle = 'rgba(186,217,168,' + g + ')';
      ctx.beginPath(); ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2); ctx.fill();
      if (n.isHub) {
        ctx.fillStyle = 'rgba(186,217,168,' + (g + 0.2) + ')';
        ctx.beginPath(); ctx.arc(n.x, n.y, n.r * 0.3, 0, Math.PI * 2); ctx.fill();
      }
      ctx.restore();
      if (n.label) {
        var la = 0.12 + 0.06 * Math.sin(t * 0.001 + n.phase * 2);
        ctx.fillStyle = 'rgba(186,217,168,' + la + ')';
        ctx.font = '600 9px "Unbounded", sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(n.label, n.x, n.y - n.r - 14);
        ctx.strokeStyle = 'rgba(186,217,168,' + (la * 0.5) + ')';
        ctx.lineWidth = 0.5;
        ctx.beginPath();
        ctx.moveTo(n.x, n.y - n.r - 4);
        ctx.lineTo(n.x, n.y - n.r - 10);
        ctx.stroke();
      }
    });
    requestAnimationFrame(draw);
  }

  init();
  window.addEventListener('resize', init);
  requestAnimationFrame(draw);
})();

/* ----------------------------------------------------------------
   SOLUTION — Canvas-based transformation diagram
   ---------------------------------------------------------------- */
(function() {
  var wrap = document.getElementById('szTransform');
  var canvas = document.getElementById('transformCanvas');
  if (!wrap || !canvas) return;
  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W, H, started = false, startT = 0, t = 0;

  var docColors = [
    { border: 'rgba(100,160,255,0.5)', bg: '#f0f4ff', accent: '#6495ed', tag: 'PDF' },
    { border: 'rgba(80,200,120,0.5)',  bg: '#f0faf3', accent: '#4caf50', tag: 'XLS' },
    { border: 'rgba(255,170,60,0.5)',  bg: '#fff8f0', accent: '#e89830', tag: 'DOC' },
    { border: 'rgba(150,120,255,0.5)', bg: '#f4f0ff', accent: '#8b6fdf', tag: 'MSG' },
    { border: 'rgba(220,80,80,0.5)',   bg: '#fff0f0', accent: '#d04040', tag: 'MD' },
    { border: 'rgba(80,180,220,0.5)',  bg: '#f0faff', accent: '#40a0c8', tag: 'PNG' }
  ];
  var docs = [
    { name: 'contract.pdf',     x: 0.05, y: 0.10, w: 0.17, h: 0.12, rot: -4, ci: 0 },
    { name: 'Q4-report.xlsx',   x: 0.20, y: 0.30, w: 0.18, h: 0.11, rot: 6,  ci: 1 },
    { name: 'onboarding.docx',  x: 0.04, y: 0.48, w: 0.16, h: 0.11, rot: -2, ci: 2 },
    { name: 'team-chat.slack',  x: 0.22, y: 0.63, w: 0.17, h: 0.10, rot: 3,  ci: 3 },
    { name: 'product-spec.md',  x: 0.06, y: 0.78, w: 0.15, h: 0.10, rot: -5, ci: 4 },
    { name: 'org-chart.png',    x: 0.24, y: 0.12, w: 0.14, h: 0.11, rot: 7,  ci: 5 }
  ];
  var gNodes = [
    { label: 'Sarah Chen',       type: 'person',  x: 0.62, y: 0.16, r: 14 },
    { label: 'Enterprise Suite',  type: 'product', x: 0.82, y: 0.28, r: 16 },
    { label: 'Onboarding',       type: 'process', x: 0.66, y: 0.46, r: 13 },
    { label: 'Q4 Report',        type: 'document',x: 0.86, y: 0.56, r: 11 },
    { label: 'James R.',         type: 'person',  x: 0.70, y: 0.72, r: 12 },
    { label: 'Roadmap',          type: 'product', x: 0.58, y: 0.86, r: 13 }
  ];
  var gEdges = [[0,1],[0,2],[1,3],[2,4],[3,5],[1,4],[0,3]];
  var links = [[0,0],[1,3],[2,2],[3,4],[4,5],[5,1]];
  var nodeColors = { person:'#7BE0AD', product:'#64B5F6', process:'#FFB74D', document:'#CE93D8' };

  function resize() {
    W = wrap.offsetWidth; H = wrap.offsetHeight;
    canvas.width = W * dpr; canvas.height = H * dpr;
    canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }
  resize();
  window.addEventListener('resize', resize);

  function easeOut(x) { return 1 - Math.pow(1 - x, 3); }
  function clamp01(v) { return Math.max(0, Math.min(1, v)); }
  function rr(c, x, y, w, h, r) {
    c.beginPath(); c.moveTo(x+r,y); c.lineTo(x+w-r,y);
    c.quadraticCurveTo(x+w,y,x+w,y+r); c.lineTo(x+w,y+h-r);
    c.quadraticCurveTo(x+w,y+h,x+w-r,y+h); c.lineTo(x+r,y+h);
    c.quadraticCurveTo(x,y+h,x,y+h-r); c.lineTo(x,y+r);
    c.quadraticCurveTo(x,y,x+r,y); c.closePath();
  }

  function drawDoc(d, alpha) {
    var x = d.x * W, y = d.y * H, w = d.w * W, h = d.h * H;
    var c = docColors[d.ci];
    ctx.save(); ctx.globalAlpha = alpha;
    ctx.translate(x + w/2, y + h/2);
    ctx.rotate(d.rot * Math.PI / 180);
    ctx.translate(-w/2, -h/2);
    ctx.shadowColor = 'rgba(0,0,0,0.08)'; ctx.shadowBlur = 10; ctx.shadowOffsetY = 3;
    ctx.fillStyle = c.bg; rr(ctx, 0, 0, w, h, 5); ctx.fill();
    ctx.shadowColor = 'transparent';
    ctx.strokeStyle = c.border; ctx.lineWidth = 1.5; rr(ctx, 0, 0, w, h, 5); ctx.stroke();
    ctx.fillStyle = c.accent; ctx.globalAlpha = alpha * 0.15;
    rr(ctx, 5, 5, 26, 12, 3); ctx.fill();
    ctx.globalAlpha = alpha * 0.7;
    ctx.fillStyle = c.accent; ctx.font = '700 7px "Unbounded", sans-serif'; ctx.textAlign = 'center';
    ctx.fillText(c.tag, 18, 14);
    ctx.globalAlpha = alpha;
    for (var i = 0; i < 3; i++) {
      ctx.fillStyle = 'rgba(26,29,27,0.06)';
      ctx.fillRect(7, 24 + i * 7, w * (0.4 + ((d.ci + i) % 3) * 0.2), 2.5);
    }
    ctx.fillStyle = 'rgba(26,29,27,0.25)'; ctx.font = '400 7px "Brother 1816", sans-serif';
    ctx.textAlign = 'left'; ctx.fillText(d.name, 7, h - 6);
    ctx.restore();
  }

  function draw() {
    t++;
    ctx.clearRect(0, 0, W, H);
    var elapsed = started ? (t - startT) / 60 : 0;

    ctx.save();
    ctx.strokeStyle = 'rgba(0,48,23,0.05)'; ctx.lineWidth = 1;
    ctx.setLineDash([4, 6]);
    ctx.beginPath(); ctx.moveTo(W * 0.47, 16); ctx.lineTo(W * 0.47, H - 16); ctx.stroke();
    ctx.setLineDash([]); ctx.restore();

    ctx.fillStyle = 'rgba(26,29,27,0.18)'; ctx.font = '600 9px "Unbounded", sans-serif';
    ctx.textAlign = 'left'; ctx.fillText('YOUR DATA', 14, 22);
    var afterA = easeOut(clamp01(elapsed - 1.8));
    if (afterA > 0) {
      ctx.save(); ctx.globalAlpha = afterA;
      ctx.textAlign = 'right'; ctx.fillText('KNOWLEDGE GRAPH', W - 14, 22);
      ctx.restore();
    }

    docs.forEach(function(d, i) {
      var glowPhase = elapsed - 1 - i * 0.4;
      if (glowPhase > 0 && glowPhase < 1.2) {
        var gi = Math.sin(glowPhase / 1.2 * Math.PI);
        ctx.save();
        var gx = (d.x + d.w / 2) * W, gy = (d.y + d.h / 2) * H;
        var grad = ctx.createRadialGradient(gx, gy, 0, gx, gy, 35);
        grad.addColorStop(0, 'rgba(186,217,168,' + (gi * 0.2) + ')');
        grad.addColorStop(1, 'rgba(186,217,168,0)');
        ctx.fillStyle = grad; ctx.fillRect(gx - 40, gy - 40, 80, 80);
        ctx.restore();
      }
      drawDoc(d, 1);
    });

    links.forEach(function(lk, i) {
      var lp = clamp01((elapsed - 1.2 - i * 0.4) * 1.2);
      if (lp <= 0) return;
      var d = docs[lk[0]], n = gNodes[lk[1]];
      var sx = (d.x + d.w) * W, sy = (d.y + d.h / 2) * H;
      var ex = n.x * W - n.r - 6, ey = n.y * H;
      var prog = easeOut(lp);
      var cx = (sx + ex) / 2 + (sy - ey) * 0.15;
      var cy = (sy + ey) / 2;
      ctx.save();
      ctx.strokeStyle = 'rgba(186,217,168,' + (0.12 * prog) + ')';
      ctx.lineWidth = 1; ctx.setLineDash([3, 5]);
      ctx.beginPath(); ctx.moveTo(sx, sy);
      ctx.quadraticCurveTo(cx, cy, sx + (ex - sx) * prog, sy + (ey - sy) * prog);
      ctx.stroke(); ctx.setLineDash([]);
      if (lp < 0.9) {
        var pp = (lp * 4) % 1;
        var ppx = sx + (ex - sx) * pp, ppy = sy + (ey - sy) * pp;
        ctx.shadowColor = 'rgba(186,217,168,0.5)'; ctx.shadowBlur = 6;
        ctx.fillStyle = 'rgba(186,217,168,0.7)';
        ctx.beginPath(); ctx.arc(ppx, ppy, 2, 0, Math.PI * 2); ctx.fill();
      }
      ctx.restore();
    });

    gEdges.forEach(function(e) {
      var ep = easeOut(clamp01(elapsed - 3.5));
      if (ep <= 0) return;
      var a = gNodes[e[0]], b = gNodes[e[1]];
      var ax = a.x * W, ay = a.y * H, bx = b.x * W, by = b.y * H;
      ctx.save(); ctx.globalAlpha = ep * 0.2;
      ctx.strokeStyle = 'rgba(0,48,23,0.4)'; ctx.lineWidth = 1;
      ctx.beginPath(); ctx.moveTo(ax, ay);
      ctx.lineTo(ax + (bx - ax) * ep, ay + (by - ay) * ep);
      ctx.stroke(); ctx.restore();
    });

    gNodes.forEach(function(n, i) {
      var np = easeOut(clamp01((elapsed - 1.8 - i * 0.35) * 1.5));
      if (np <= 0) return;
      var nx = n.x * W + Math.sin(t * 0.002 + i) * 2;
      var ny = n.y * H + Math.cos(t * 0.002 + i + 1) * 1.5;
      var r = n.r * np, col = nodeColors[n.type];
      ctx.save(); ctx.globalAlpha = np;
      ctx.shadowColor = col; ctx.shadowBlur = 10;
      ctx.fillStyle = col.replace(')', ',0.1)').replace('#', 'rgba(').replace(
        /rgba\(([0-9A-F]{6}),/i, function(m, hex) {
          return 'rgba(' + parseInt(hex.slice(0,2),16) + ',' + parseInt(hex.slice(2,4),16) + ',' + parseInt(hex.slice(4,6),16) + ',';
        });
      var dimCol = 'rgba(' + parseInt(col.slice(1,3),16) + ',' + parseInt(col.slice(3,5),16) + ',' + parseInt(col.slice(5,7),16) + ',0.1)';
      ctx.fillStyle = dimCol;
      ctx.beginPath(); ctx.arc(nx, ny, r, 0, Math.PI * 2); ctx.fill();
      ctx.strokeStyle = col; ctx.lineWidth = 1.5;
      ctx.beginPath(); ctx.arc(nx, ny, r, 0, Math.PI * 2); ctx.stroke();
      ctx.shadowBlur = 0;
      ctx.fillStyle = col;
      ctx.beginPath(); ctx.arc(nx, ny, 3 * np, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = 'rgba(26,29,27,0.45)'; ctx.font = '500 9px "Brother 1816", sans-serif';
      ctx.textAlign = 'center'; ctx.fillText(n.label, nx, ny + r + 14);
      ctx.restore();
    });

    requestAnimationFrame(draw);
  }

  var obs = new IntersectionObserver(function(entries) {
    entries.forEach(function(e) {
      if (e.isIntersecting && !started) { started = true; startT = t; }
    });
  }, { threshold: 0.25 });
  obs.observe(wrap);
  requestAnimationFrame(draw);
})();

/* ----------------------------------------------------------------
   INTERACTIVE KNOWLEDGE GRAPH (Canvas)
   ---------------------------------------------------------------- */
(function() {
  var wrap = document.getElementById('kgWrap');
  var canvas = document.getElementById('kgCanvas');
  var tooltip = document.getElementById('kgTooltip');
  var tooltipType = document.getElementById('kgTooltipType');
  var tooltipName = document.getElementById('kgTooltipName');
  var tooltipSub = document.getElementById('kgTooltipSub');
  if (!canvas || !wrap) return;

  var ctx = canvas.getContext('2d');
  var dpr = window.devicePixelRatio || 1;
  var W, H, t = 0, hoveredNode = null, activeFilter = 'all';

  var typeColors = {
    person:   { fill: 'rgba(123,224,173,0.9)', dim: 'rgba(123,224,173,0.15)', label: '#7BE0AD', name: 'Person' },
    product:  { fill: 'rgba(100,181,246,0.9)', dim: 'rgba(100,181,246,0.15)', label: '#64B5F6', name: 'Product' },
    process:  { fill: 'rgba(255,183,77,0.9)',  dim: 'rgba(255,183,77,0.15)',  label: '#FFB74D', name: 'Process' },
    document: { fill: 'rgba(206,147,216,0.9)', dim: 'rgba(206,147,216,0.15)', label: '#CE93D8', name: 'Document' }
  };

  var kgNodes = [
    { id: 'p1', label: 'Sarah Chen',     type: 'person',   sub: 'CEO',             x: 0.16, y: 0.28, r: 26 },
    { id: 'p2', label: 'James Rodriguez',type: 'person',   sub: 'CTO',             x: 0.62, y: 0.16, r: 22 },
    { id: 'p3', label: 'Emily Watson',   type: 'person',   sub: 'VP Sales',        x: 0.10, y: 0.70, r: 21 },
    { id: 'p4', label: 'Alex Kim',       type: 'person',   sub: 'Product Manager', x: 0.80, y: 0.50, r: 20 },
    { id: 'pr1',label: 'Enterprise Suite',type: 'product',  sub: '94 features',     x: 0.36, y: 0.20, r: 28 },
    { id: 'pr2',label: 'Mobile App',     type: 'product',  sub: 'v3.2',            x: 0.88, y: 0.28, r: 20 },
    { id: 'pr3',label: 'Analytics',      type: 'product',  sub: 'Dashboard',       x: 0.54, y: 0.74, r: 22 },
    { id: 'proc1',label:'Onboarding',    type: 'process',  sub: '12 steps',        x: 0.26, y: 0.80, r: 24 },
    { id: 'proc2',label:'Quarterly Review',type:'process',  sub: 'Every Q',         x: 0.46, y: 0.46, r: 22 },
    { id: 'proc3',label:'Sprint Planning',type: 'process',  sub: 'Bi-weekly',       x: 0.82, y: 0.78, r: 19 },
    { id: 'd1', label: 'Q4 Report',      type: 'document', sub: 'PDF, 42 pages',   x: 0.30, y: 0.52, r: 18 },
    { id: 'd2', label: 'Product Roadmap',type: 'document', sub: 'Last updated 2d',x: 0.70, y: 0.38, r: 20 },
    { id: 'd3', label: 'Sales Playbook', type: 'document', sub: 'DOCX',            x: 0.18, y: 0.50, r: 17 },
    { id: 'd4', label: 'Org Chart',      type: 'document', sub: 'XLSX',            x: 0.92, y: 0.60, r: 16 }
  ];

  var kgEdges = [
    { from: 'p1',  to: 'pr1',  label: 'leads' },
    { from: 'p2',  to: 'pr2',  label: 'owns' },
    { from: 'p3',  to: 'proc1',label: 'manages' },
    { from: 'p4',  to: 'proc3',label: 'runs' },
    { from: 'd1',  to: 'p1',   label: 'mentions' },
    { from: 'd1',  to: 'pr1',  label: 'covers' },
    { from: 'd2',  to: 'pr3',  label: 'defines' },
    { from: 'd2',  to: 'p2',   label: 'authored by' },
    { from: 'd3',  to: 'p3',   label: 'authored by' },
    { from: 'd3',  to: 'proc1',label: 'documents' },
    { from: 'proc2',to: 'p1',  label: 'involves' },
    { from: 'proc2',to: 'pr1', label: 'reviews' },
    { from: 'proc3',to: 'p4',  label: 'involves' },
    { from: 'proc3',to: 'p2',  label: 'involves' },
    { from: 'pr1', to: 'pr3',  label: 'includes' },
    { from: 'p1',  to: 'd1',   label: 'approved' },
    { from: 'd4',  to: 'p1',   label: 'lists' },
    { from: 'd4',  to: 'p2',   label: 'lists' },
    { from: 'd4',  to: 'p3',   label: 'lists' }
  ];

  var nodeMap = {};
  kgNodes.forEach(function(n) { nodeMap[n.id] = n; });

  function resize() {
    W = wrap.offsetWidth; H = wrap.offsetHeight;
    canvas.width = W * dpr; canvas.height = H * dpr;
    canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }
  resize();
  window.addEventListener('resize', resize);

  function isActive(node) {
    return activeFilter === 'all' || node.type === activeFilter;
  }
  function isEdgeActive(edge) {
    var fn = nodeMap[edge.from], tn = nodeMap[edge.to];
    return fn && tn && isActive(fn) && isActive(tn);
  }
  function isConnected(node) {
    if (!hoveredNode) return false;
    if (node.id === hoveredNode.id) return true;
    for (var i = 0; i < kgEdges.length; i++) {
      var e = kgEdges[i];
      if ((e.from === hoveredNode.id && e.to === node.id) ||
          (e.to === hoveredNode.id && e.from === node.id)) return true;
    }
    return false;
  }

  var kgPackets = [];

  function getNodePos(n) {
    return {
      x: n.x * W + Math.sin(t * 0.001 + n.x * 10) * 4,
      y: n.y * H + Math.cos(t * 0.001 + n.y * 10) * 3
    };
  }

  function draw() {
    t++;
    ctx.clearRect(0, 0, W, H);

    kgEdges.forEach(function(e) {
      var fn = nodeMap[e.from], tn = nodeMap[e.to];
      if (!fn || !tn) return;
      var fp = getNodePos(fn), tp = getNodePos(tn);
      var active = isEdgeActive(e);
      var connected = hoveredNode && ((e.from === hoveredNode.id) || (e.to === hoveredNode.id));
      var alpha = active ? (connected ? 0.55 : 0.18) : 0.04;
      ctx.strokeStyle = connected ? 'rgba(186,217,168,' + alpha + ')' : 'rgba(186,217,168,' + alpha + ')';
      ctx.lineWidth = connected ? 2.5 : 1.2;
      var mx = (fp.x + tp.x) / 2 + (fp.y - tp.y) * 0.12;
      var my = (fp.y + tp.y) / 2 + (tp.x - fp.x) * 0.12;
      ctx.beginPath();
      ctx.moveTo(fp.x, fp.y);
      ctx.quadraticCurveTo(mx, my, tp.x, tp.y);
      ctx.stroke();
      if (connected && e.label) {
        ctx.fillStyle = 'rgba(186,217,168,' + (alpha * 0.8) + ')';
        ctx.font = '400 9px "Brother 1816", sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(e.label, mx, my - 6);
      }
    });

    if (t % 40 === 0 && kgEdges.length > 0) {
      var ei = kgEdges[Math.floor(Math.random() * kgEdges.length)];
      var fn = nodeMap[ei.from], tn = nodeMap[ei.to];
      if (fn && tn && isActive(fn) && isActive(tn))
        kgPackets.push({ from: ei.from, to: ei.to, p: 0, speed: 0.006 + Math.random() * 0.008 });
    }
    for (var pi = kgPackets.length - 1; pi >= 0; pi--) {
      var pk = kgPackets[pi];
      pk.p += pk.speed;
      if (pk.p >= 1) { kgPackets.splice(pi, 1); continue; }
      var fn = nodeMap[pk.from], tn = nodeMap[pk.to];
      if (!fn || !tn) continue;
      var fp = getNodePos(fn), tp = getNodePos(tn);
      var px = fp.x + (tp.x - fp.x) * pk.p;
      var py = fp.y + (tp.y - fp.y) * pk.p;
      var al = pk.p < 0.1 ? pk.p / 0.1 : pk.p > 0.85 ? (1 - pk.p) / 0.15 : 0.6;
      ctx.save();
      ctx.shadowColor = 'rgba(186,217,168,0.5)'; ctx.shadowBlur = 8;
      ctx.fillStyle = 'rgba(186,217,168,' + al + ')';
      ctx.beginPath(); ctx.arc(px, py, 2.5, 0, Math.PI * 2); ctx.fill();
      ctx.restore();
    }

    kgNodes.forEach(function(n) {
      var pos = getNodePos(n);
      var tc = typeColors[n.type];
      var active = isActive(n);
      var connected = isConnected(n);
      var isHovered = hoveredNode && hoveredNode.id === n.id;
      var nodeAlpha = active ? (hoveredNode ? (connected ? 1 : 0.2) : 1) : 0.06;
      var r = n.r * (isHovered ? 1.15 : 1);
      var pulse = 1 + 0.03 * Math.sin(t * 0.004 + n.x * 5);

      ctx.save();
      ctx.globalAlpha = nodeAlpha;

      if (isHovered) {
        ctx.shadowColor = tc.fill; ctx.shadowBlur = 24;
        var gr = r * 1.6 + 4 * Math.sin(t * 0.003);
        ctx.strokeStyle = tc.fill.replace('0.9', '0.12');
        ctx.lineWidth = 1;
        ctx.beginPath(); ctx.arc(pos.x, pos.y, gr, 0, Math.PI * 2); ctx.stroke();
      }

      ctx.fillStyle = tc.dim;
      ctx.beginPath(); ctx.arc(pos.x, pos.y, r * pulse, 0, Math.PI * 2); ctx.fill();

      ctx.strokeStyle = tc.fill;
      ctx.lineWidth = isHovered ? 2.5 : 1.8;
      ctx.beginPath(); ctx.arc(pos.x, pos.y, r * pulse, 0, Math.PI * 2); ctx.stroke();

      ctx.fillStyle = tc.fill;
      ctx.beginPath(); ctx.arc(pos.x, pos.y, 4, 0, Math.PI * 2); ctx.fill();

      if (active && (!hoveredNode || connected)) {
        ctx.fillStyle = 'rgba(223,220,215,' + (connected || !hoveredNode ? 0.75 : 0.3) + ')';
        ctx.font = '500 11px "Brother 1816", sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(n.label, pos.x, pos.y + r + 18);
      }

      ctx.restore();
    });

    requestAnimationFrame(draw);
  }

  canvas.addEventListener('mousemove', function(ev) {
    var rect = canvas.getBoundingClientRect();
    var mx = ev.clientX - rect.left;
    var my = ev.clientY - rect.top;
    hoveredNode = null;
    for (var i = 0; i < kgNodes.length; i++) {
      var n = kgNodes[i];
      if (!isActive(n)) continue;
      var nx = n.x * W + Math.sin(t * 0.001 + n.x * 10) * 3;
      var ny = n.y * H + Math.cos(t * 0.001 + n.y * 10) * 2;
      var dx = mx - nx, dy = my - ny;
      if (Math.sqrt(dx * dx + dy * dy) < n.r + 8) {
        hoveredNode = n;
        break;
      }
    }
    if (hoveredNode) {
      canvas.style.cursor = 'pointer';
      var tc = typeColors[hoveredNode.type];
      tooltipType.textContent = tc.name;
      tooltipType.style.color = tc.label;
      tooltipName.textContent = hoveredNode.label;
      tooltipSub.textContent = hoveredNode.sub;
      tooltip.classList.add('active');
      var tx = Math.min(mx + 16, W - 170);
      var ty = Math.max(my - 60, 10);
      tooltip.style.left = tx + 'px';
      tooltip.style.top = ty + 'px';
    } else {
      canvas.style.cursor = 'default';
      tooltip.classList.remove('active');
    }
  });

  canvas.addEventListener('mouseleave', function() {
    hoveredNode = null;
    tooltip.classList.remove('active');
    canvas.style.cursor = 'default';
  });

  document.querySelectorAll('.sz-kg-tab').forEach(function(tab) {
    tab.addEventListener('click', function() {
      document.querySelectorAll('.sz-kg-tab').forEach(function(t) { t.classList.remove('active'); });
      tab.classList.add('active');
      activeFilter = tab.getAttribute('data-filter');
    });
  });

  requestAnimationFrame(draw);
})();
</script>
</body>
</html>
